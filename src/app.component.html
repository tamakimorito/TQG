<div class="flex flex-col min-h-screen">
  <header class="bg-white/50 backdrop-blur-sm sticky top-0 z-10 shadow-md">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <a routerLink="/" class="flex items-baseline gap-2 text-[#5A3A1B] hover:opacity-80 transition-opacity">
            <span class="font-logo text-3xl tracking-wider">TQG</span>
            <span class="text-base font-semibold">トウキュウガッチャンコ</span>
          </a>
        </div>
        <div class="flex items-baseline space-x-4">
          <a routerLink="/" routerLinkActive="border-[#FFC400]" [routerLinkActiveOptions]="{exact: true}"
             class="text-[#5A3A1B] hover:bg-[#FFC400]/20 px-3 py-2 rounded-md text-sm font-medium border-b-2 border-transparent transition-colors">
            Home
          </a>
        </div>
      </div>
    </nav>
  </header>

  <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8">
    <router-outlet></router-outlet>
  </main>

  <footer class="bg-[#5A3A1B] text-[#FFF9E6] text-center p-4 text-sm">
    ©タマシステム2025 · {{ appVersion }}
  </footer>
</div>

<!-- Global Toast Notification -->
@if (toast(); as toast) {
  <div class="fixed top-5 right-5 z-50 transition-all duration-300 ease-in-out"
       [class.bg-[#2E7D32]]="toast.type === 'success'"
       [class.bg-red-600]="toast.type === 'error'">
    <div class="max-w-sm rounded-md shadow-lg p-4 text-white">
      <p>{{ toast.message }}</p>
    </div>
  </div>
}

<!-- Global Processing Modal -->
@if (isProcessing()) {
  <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-[#FFF9E6] p-8 rounded-lg shadow-xl text-center">
      <div class="w-16 h-16 border-4 border-dashed rounded-full animate-spin border-[#FFC400] mx-auto"></div>
      <h3 class="text-xl font-bold mt-4 text-[#5A3A1B]">処理中です...</h3>
      <p class="text-[#5A3A1B]/80 mt-2">しばらくお待ちください。</p>
    </div>
  </div>
}