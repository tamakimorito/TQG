
<div class="flex flex-col lg:flex-row gap-8">
  <!-- Registration Form -->
  <div class="lg:w-1/3">
    <div class="bg-white/60 rounded-xl shadow-lg p-6 sm:p-8 border border-[#5A3A1B]/10 sticky top-24">
      <h2 class="text-2xl font-bold text-[#5A3A1B]">シートの新規登録</h2>
      <form [formGroup]="registryForm" (ngSubmit)="onSubmit()" class="mt-4 space-y-4">
        <div>
          <label for="sheet-name" class="block text-sm font-medium text-[#5A3A1B]">表示名</label>
          <input type="text" id="sheet-name" formControlName="name"
                 class="mt-1 w-full p-2 border border-[#5A3A1B]/30 rounded-md bg-[#FFF9E6] focus:ring-[#FFC400] focus:border-[#FFC400] transition"
                 placeholder="例：プロジェクト売上シート">
          @if (registryForm.get('name')?.invalid && registryForm.get('name')?.touched) {
            <p class="text-sm text-red-600 mt-1">表示名は必須です。</p>
          }
        </div>
        <div>
          <label for="sheet-url" class="block text-sm font-medium text-[#5A3A1B]">スプレッドシートURL</label>
          <input type="url" id="sheet-url" formControlName="url"
                 class="mt-1 w-full p-2 border border-[#5A3A1B]/30 rounded-md bg-[#FFF9E6] focus:ring-[#FFC400] focus:border-[#FFC400] transition"
                 placeholder="https://docs.google.com/spreadsheets/d/...">
          @if (registryForm.get('url')?.invalid && registryForm.get('url')?.touched) {
            <p class="text-sm text-red-600 mt-1">
              @if (registryForm.get('url')?.hasError('required')) {
                URLは必須です。
              } @else {
                正しい形式のURLを入力してください。
              }
            </p>
          }
        </div>
        <div>
          <button type="submit" [disabled]="registryForm.invalid || isSubmitting()"
                  class="w-full bg-[#2E7D32] text-white font-bold py-3 px-4 rounded-md hover:bg-[#2E7D32]/90 transition
                         disabled:opacity-50 disabled:cursor-not-allowed">
            {{ isSubmitting() ? '登録中...' : '登録する' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Registered List -->
  <div class="lg:w-2/3">
    <div class="bg-white/60 rounded-xl shadow-lg p-6 sm:p-8 border border-[#5A3A1B]/10">
      <h2 class="text-2xl font-bold text-[#5A3A1B]">登録済みシート一覧</h2>
      @if (sheets().length > 0) {
        <div class="mt-4 overflow-x-auto">
          <table class="w-full text-left">
            <thead class="border-b-2 border-[#5A3A1B]/20">
              <tr>
                <th class="p-3 text-sm font-semibold text-[#5A3A1B]">表示名</th>
                <th class="p-3 text-sm font-semibold text-[#5A3A1B]">URL</th>
              </tr>
            </thead>
            <tbody>
              @for (sheet of sheets(); track sheet.url) {
                <tr class="border-b border-[#5A3A1B]/10">
                  <td class="p-3 font-medium align-top">{{ sheet.name }}</td>
                  <td class="p-3 text-[#5A3A1B]/80 break-all align-top">
                    <a [href]="sheet.url" target="_blank" rel="noopener noreferrer" class="hover:text-[#FFC400] transition">
                      {{ sheet.url }}
                    </a>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      } @else {
        <div class="mt-4 text-center p-8 bg-[#FFF9E6] rounded-md">
          <p>登録済みのシートはありません。</p>
        </div>
      }
    </div>
  </div>
</div>
